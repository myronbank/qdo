(this["webpackJsonpshopping-site"]=this["webpackJsonpshopping-site"]||[]).push([[0],{112:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(28),c=a.n(l),s=(a(65),a(5)),i=a.n(s),o=a(6),u=a(4),m=a(2),d=a(3),p=a.n(d),E=a(7),v=a(12),f=a.n(v);f.a.interceptors.response.use(null,(function(e){return e.res&&e.res.status>=400&&e.res.status<500||console.log("there has been an unknown error",e),Promise.reject(e)})),i.a.getJSON("userInfo")&&(f.a.defaults.headers.common.Authorization=i.a.getJSON("userInfo").token);var g={get:f.a.get,post:f.a.post,put:f.a.put,delete:f.a.delete};var h=function(){return function(){var e=Object(E.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"PRODUCT_LIST_REQUEST"}),e.next=4,f.a.get("/api/products");case 4:a=e.sent,n=a.data,t({type:"PRODUCT_LIST_SUCCESS",payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"PRODUCT_LIST_ERROR",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},b=a(21),y=a(19),S=a(25),O=a(22),C=a(20),_=a(54),N=a.n(_),j=a(55),w=a.n(j),I=a(56),T=a.n(I),k=function(e){Object(O.a)(a,e);var t=Object(C.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={slideIndex:1,status:[!0,!1,!1]},e}return Object(S.a)(a,[{key:"plusSlides",value:function(e){console.log("event fired");var t=this.state.status.length;this.state.slideIndex>=t&&1==e?e=1:1==this.state.slideIndex&&-1==e?e=t:e+=this.state.slideIndex,this.showSlides(e,this.state.slideIndex)}},{key:"showSlides",value:function(e,t){var a=Object(b.a)(this.state.status);console.log(a);for(var n=0;n<this.state.status.length;n++)a[n]=!1;a[e-1]=!0,this.setState({status:a,slideIndex:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"slideshow-containter"},this.state.status[0]&&r.a.createElement("div",{className:"mySlides fade"},r.a.createElement("img",{src:N.a})),this.state.status[1]&&r.a.createElement("div",{className:"mySlides fade"},r.a.createElement("img",{src:w.a})),this.state.status[2]&&r.a.createElement("div",{className:"mySlides fade"},r.a.createElement("img",{src:T.a})),r.a.createElement("a",{className:"prev",onClick:function(){return e.plusSlides(-1)}},"\u276e"),r.a.createElement("a",{className:"next",onClick:function(){return e.plusSlides(1)}},"\u276f")))}}]),a}(n.Component),x=function(){var e=Object(m.d)((function(e){return e.productList})),t=e.products,a=e.loading,l=e.error,c=Object(m.c)();return Object(n.useEffect)((function(){c(h())}),[]),a?r.a.createElement("div",null,"Loading..."):l?r.a.createElement("div",null,l):r.a.createElement("div",{className:"content"},r.a.createElement(k,null),r.a.createElement("ul",{className:"products"},t.map((function(e){return r.a.createElement("li",{className:"product",key:e._id},r.a.createElement("div",{className:"product__image"},r.a.createElement(o.b,{to:"/product/"+e._id},r.a.createElement("img",{src:e.image,alt:"product"}))),r.a.createElement("div",{className:"product__content"},r.a.createElement(o.b,{to:"/product/"+e._id},e.name),r.a.createElement("span",null,"$",e.price)))}))))},U=a(11);var P=function(e){var t=Object(n.useState)(1),a=Object(U.a)(t,2),l=a[0],c=a[1],s=Object(m.d)((function(e){return e.productDetails})),i=s.product,u=s.loading,d=s.error,v=Object(m.c)();return Object(n.useEffect)((function(){var t;v((t=e.match.params.id,function(){var e=Object(E.a)(p.a.mark((function e(a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"PRODUCT_DETAILS_REQUEST",payload:t}),e.next=4,f.a.get("/api/products/"+t);case 4:n=e.sent,r=n.data,a({type:"PRODUCT_DETAILS_SUCCESS",payload:r[0]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:"PRODUCT_DETAILS_FAIL",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"breadcrumb"},r.a.createElement(o.b,{to:"/"}," \u25f8 Back to results")),u?r.a.createElement("div",null,"loading..."):d?r.a.createElement("div",null,d):r.a.createElement("div",null,r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"details-image"},r.a.createElement("img",{src:i.image})),r.a.createElement("div",{className:"details-info"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("h4",null,i.name)),r.a.createElement("li",null,i.rating," Stars"),r.a.createElement("li",null,"Price: $",r.a.createElement("b",null,i.price)),r.a.createElement("li",null,"Description:",r.a.createElement("div",null,i.description)))),r.a.createElement("div",{className:"details-action"},r.a.createElement("ul",null,r.a.createElement("li",null,"Price: $",r.a.createElement("b",null,i.price)),r.a.createElement("li",null,"Status: ",i.countInStock>0?"In Stock":"Unavailable"),r.a.createElement("li",null,"Qty: ",r.a.createElement("select",{value:l,onChange:function(e){c(e.target.value)}},Object(b.a)(Array(i.countInStock).keys()).map((function(e){return r.a.createElement("option",{key:e+1,value:e+1},e+1)})))),r.a.createElement("li",null,i.countInStock>0&&r.a.createElement("button",{onClick:function(){e.history.push("/cart/"+e.match.params.id+"?qty="+l)},className:"button"},"Add to Cart")))))))};var D=function(e,t){return function(){var a=Object(E.a)(p.a.mark((function a(n,r){var l,c,s,o;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.get("/api/products/"+e);case 3:l=a.sent,c=l.data,n({type:"ADD_TO_CART",payload:{_id:c[0]._id,name:c[0].name,image:c[0].image,price:c[0].price,countInStock:c[0].countInStock,qty:t}}),s=r(),o=s.cart.cartItems,i.a.set("cartItems",JSON.stringify(o)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()};var A=function(e){var t=e.match.params.id,a=e.location.search?Number(e.location.search.split("=")[1]):1,l=Object(m.d)((function(e){return e.cart})).cartItems,c=Object(m.c)(),s=function(e){c(function(e){return function(t,a){try{t({type:"CART_REMOVE_ITEM",payload:e});var n=a().cart.cartItems;i.a.set("cartItems",JSON.stringify(n))}catch(r){}}}(e))};return Object(n.useEffect)((function(){t&&c(D(t,a))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cart"},r.a.createElement("div",{className:"cart-list"},r.a.createElement("div",{className:"cart-header"},r.a.createElement("h3",null,"Shopping Cart"),r.a.createElement("h6",null,"Price")),0===l.length?r.a.createElement("div",null,"Cart is empty"):l.map((function(e){return r.a.createElement("div",{key:e._id,className:"cart-details"},r.a.createElement("div",{className:"cart-details-image"},r.a.createElement("img",{src:e.image})),r.a.createElement("div",{className:"cart-details-info"},r.a.createElement("ul",null,r.a.createElement("li",null,e.name),r.a.createElement("li",null,"Qty: ",r.a.createElement("select",{value:e.qty,onChange:function(t){return c(D(e._id,t.target.value))}},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"))),r.a.createElement("button",{className:"button",onClick:function(){return s(e._id)}},"Remove item"),r.a.createElement("li",null,e.price))))}))),r.a.createElement("div",{className:"cart-action"},r.a.createElement("h4",{className:"cart-action-item"},"Subtotal (",l.reduce((function(e,t){return e+Number(t.qty)}),0)," items) :",r.a.createElement("br",null),"$ ",l.reduce((function(e,t){return e+t.qty*t.price}),0)),r.a.createElement("button",{onClick:function(){i.a.getJSON("userInfo")?e.history.push("/shipping"):e.history.push("/signin?redirect=shipping")},className:"button cart-action-item"},"Check Out"))))},F=a(9),R=a(10),L=a(17);function M(e){return g.post("/api/user/createAccount",e)}var q=a(1),G=a.n(q);var H=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(U.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)({}),u=Object(U.a)(s,2),d=u[0],v=u[1],f=Object(m.d)((function(e){return e.users})),h=f.user,b=f.loading,y=f.error,S=e.location.search?e.location.search.split("=")[1]:"/",O=Object(m.c)(),C={email:G.a.string().required().email({minDomainSegments:2,tlds:{allow:["com","net"]}}),password:G.a.string().required().min(6).max(255)},_=function(e){var t=e.target,a={},n=function(e,t){var a=Object(R.a)({},e,t),n=Object(R.a)({},e,C[e]),r=G.a.object(n).validate(a).error;return r?r.details[0].message:null}(t.name,t.value);n?a[t.name]=n:delete d[t.name];var r=Object(F.a)({},l);r[t.name]=t.value,c(r),v(a)},N=function(e){e.preventDefault();var t,a=function(){var e=G.a.object(C).validate(l,{abortEarly:!1}).error;if(!e)return null;var t,a={},n=Object(L.a)(e.details);try{for(n.s();!(t=n.n()).done;){var r=t.value;a[r.path[0]]=r.message}}catch(c){n.e(c)}finally{n.f()}}();a&&console.log("not validated"),a||O((t=l,function(){var e=Object(E.a)(p.a.mark((function e(a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOGIN_ATTEMPT"}),e.prev=1,e.next=4,l=t,g.post("/api/login",l);case 4:n=e.sent,r=n.data,a({type:"LOGIN_SUCCESS",payload:r}),i.a.set("userInfo",JSON.stringify(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),a({type:"LOGIN_FAIL",payload:e.t0.message});case 13:case"end":return e.stop()}var l}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()))};return Object(n.useEffect)((function(){h&&(window.location=S)}),[f]),r.a.createElement("div",{className:"form"},r.a.createElement("h3",null,"Sign-In"),b&&r.a.createElement("div",null,"loading..."),y&&r.a.createElement("div",null,"error"),r.a.createElement("form",{className:"form-content",onSubmit:N},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",value:l.email,name:"email",onChange:_}),d&&r.a.createElement("div",{className:"error-message"},d.email),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{value:l.password,id:"password",type:"password",name:"password",onChange:_}),d&&r.a.createElement("div",{className:"error-message"},d.password),r.a.createElement("br",null),r.a.createElement("button",{onClick:N,className:"button"},"Sign In"),r.a.createElement("p",null,"New to Furniture Direct?"),r.a.createElement("button",{className:"button"},r.a.createElement(o.b,{to:"/"===S?"signup":"/signup?redirect="+S},"Create Account"))))};var B=function(e){var t=Object(n.useState)({name:"",email:"",password:"",repassword:""}),a=Object(U.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)({}),u=Object(U.a)(s,2),d=u[0],v=u[1],f=Object(m.d)((function(e){return e.register})),g=f.user,h=f.loading,b=f.error,y=e.location.search?e.location.search.split("=")[1]:"/",S=Object(m.c)(),O={email:G.a.string().required().email({minDomainSegments:2,tlds:{allow:["com","net"]}}),password:G.a.string().required().min(6).max(255),repassword:G.a.string().required().min(6).max(255),name:G.a.string().required().min(3).max(50)},C=function(){var e=G.a.object(O).validate(l,{abortEarly:!1}).error;if(!e)return null;var t,a={},n=Object(L.a)(e.details);try{for(n.s();!(t=n.n()).done;){var r=t.value;a[r.path[0]]=r.message}}catch(c){n.e(c)}finally{n.f()}return a},_=function(e){var t=e.target,a={},n=function(e,t){var a=Object(R.a)({},e,t),n=Object(R.a)({},e,O[e]),r=G.a.object(n).validate(a).error;return r?r.details[0].message:null}(t.name,t.value);n?a[t.name]=n:delete d[t.name];var r=Object(F.a)({},l);r[t.name]=t.value,c(r),v(a)},N=function(e){e.preventDefault();var t,a=C();a&&console.log("not validated"),a||S((t=l,function(){var e=Object(E.a)(p.a.mark((function e(a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"SIGN_UP_ATTEMPT"}),e.prev=1,e.next=4,M(t);case 4:n=e.sent,r=n.data,a({type:"SIGN_UP_SUCCESS",payload:r}),i.a.set("userInfo",JSON.stringify(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),a({type:"SIGN_UP_FAIL",payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()))};return Object(n.useEffect)((function(){g&&(window.location=y)}),[f]),r.a.createElement("div",{className:"form"},r.a.createElement("h3",null,"Sign Up"),h&&r.a.createElement("div",null,"loading..."),b&&r.a.createElement("div",null,"error"),r.a.createElement("form",{className:"form-content",onSubmit:N},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",id:"name",value:l.name,name:"name",onChange:_}),d&&r.a.createElement("div",{className:"error-message"},d.name),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",value:l.email,name:"email",onChange:_}),d&&r.a.createElement("div",{className:"error-message"},d.email),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{value:l.password,id:"password",type:"password",name:"password",onChange:_}),d&&r.a.createElement("div",{className:"error-message"},d.password),r.a.createElement("label",{htmlFor:"repassword"},"confirm password"),r.a.createElement("input",{value:l.repassword,id:"repassword",type:"password",name:"repassword",onChange:_}),d&&r.a.createElement("div",{className:"error-message"},d.repassword),r.a.createElement("br",null),r.a.createElement("button",{onClick:N,className:"button",disabled:C()},"Sign Up"),r.a.createElement("p",null,"Already got an account?"),r.a.createElement("button",{className:"button"},r.a.createElement(o.b,{to:"/"===y?"signin":"/signin?redirect="+y},"Create Account"))))};var J=function(e){var t=Object(n.useState)({name:"",email:"",message:""}),a=Object(U.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)({}),i=Object(U.a)(s,2),o=i[0],u=i[1],d=Object(n.useState)(!1),v=Object(U.a)(d,2),f=v[0],h=v[1],b=Object(m.c)(),y={name:G.a.string().required().min(3).max(50),email:G.a.string().required().email({minDomainSegments:2,tlds:{allow:["com","net"]}}),message:G.a.string().required().max(1e3)},S=function(){var e=G.a.object(y).validate(l,{abortEarly:!1}).error;if(!e)return null;var t,a={},n=Object(L.a)(e.details);try{for(n.s();!(t=n.n()).done;){var r=t.value;a[r.path[0]]=r.message}}catch(c){n.e(c)}finally{n.f()}return a},O=function(e){var t=e.target,a={},n=function(e,t){var a=Object(R.a)({},e,t),n=Object(R.a)({},e,y[e]),r=G.a.object(n).validate(a).error;return r?r.details[0].message:null}(t.name,t.value);n?a[t.name]=n:delete o[t.name];var r=Object(F.a)({},l);r[t.name]=t.value,c(r),u(a)},C=function(e){e.preventDefault();var t=S();t&&console.log("not validated"),t||b(function(e){return function(){var t=Object(E.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"CONTACT_US_SUBMITTED"}),t.next=4,r=e,g.post("/api/contactUs",r);case 4:n=t.sent,a({type:"CONTACT_US_SUCCESS",payload:n}),console.log(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:"CONTACT_US_FAIL",payload:t.t0});case 12:case"end":return t.stop()}var r}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(l)),h(!0)};return Object(n.useEffect)((function(){!0===f&&window.location.reload("/contactUs")}),[f]),r.a.createElement("div",{className:"form"},r.a.createElement("h3",null,"Contact Us"),r.a.createElement("form",{className:"form-content",onSubmit:C},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",id:"name",value:l.name,name:"name",onChange:O}),o&&r.a.createElement("div",{className:"error-message"},o.name),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",value:l.email,name:"email",onChange:O}),o&&r.a.createElement("div",{className:"error-message"},o.email),r.a.createElement("label",{htmlFor:"message"},"Message"),r.a.createElement("textarea",{rows:"4",content:l.text,id:"message",name:"message",onChange:O}),o&&r.a.createElement("div",{className:"error-message"},o.text),r.a.createElement("br",null),r.a.createElement("button",{onClick:C,className:"button",disabled:S()},"Submit")))},z=a(58),Q=function(e){var t=e.name,a=e.label,n=e.errors,l=Object(z.a)(e,["name","label","errors"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:t},a),r.a.createElement("input",Object.assign({},l,{name:t,id:t})),n&&r.a.createElement("div",{className:"error-message"},n))},V=function(e){Object(O.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).state={field:{},errors:{},image:[]},n.validate=function(){var e=G.a.object(n.schemaRule).validate(n.state.field,{abortEarly:!1}).error;if(!e)return null;var t,a={},r=Object(L.a)(e.details);try{for(r.s();!(t=r.n()).done;){var l=t.value;a[l.path[0]]=l.message}}catch(c){r.e(c)}finally{r.f()}return a},n.validateField=function(e,t){var a=Object(R.a)({},e,t),r=Object(R.a)({},e,n.schemaRule[e]),l=G.a.object(r).validate(a).error;return l?l.details[0].message:null},n.handleChange=function(e){var t=e.target,a={},r=n.validateField(t.name,t.value);r?a[t.name]=r:delete n.state.errors[t.name];var l=Object(F.a)({},n.state.field);l[t.name]=t.value,n.setState({field:l,errors:a})},n.handleSubmit=function(){return console.log(n.state.field),!n.validate()||(console.log("not validated"),!1)},n.handleSelect=function(e){for(var t=[],a=0;a<e.target.files.length;a++)t[a]=e.target.files.item(a);t=t.filter((function(e){return e.name.match(/\.(jpg|jpeg|png|gif)?/)}));var r="".concat(t.length," valid image(s) selected");n.setState({image:t,message:r})},n.generateButton=function(e,t){return r.a.createElement(r.a.Fragment,null,n.state.field._id?r.a.createElement("button",{className:"button",onClick:t},e):r.a.createElement("button",{disabled:n.validate(),className:"button",onClick:t},e))},n.generateForm=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";return r.a.createElement(Q,{name:e,label:t,value:n.state.field[e]||"",type:a,onChange:n.handleChange,errors:n.state.errors[e]})},n.generateUploadForm=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"image"},"Image"),r.a.createElement("input",{name:"image",id:"image",type:"file",onChange:n.handleSelect,ref:n.input,multiple:!0}))},n.input=r.a.createRef(),n}return a}(n.Component);function $(){return i.a.getJSON("userInfo")||null}var W=function(e){Object(O.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).state={field:{image:"",_id:"",name:"",brand:"",price:0,category:"",countInStock:0,description:""},errors:{},image:[],imageUrls:[],display:!1,products:null},n.schemaRule={image:G.a.array(),_id:G.a.string(),name:G.a.string().required().min(3).max(50),price:G.a.number().required(),category:G.a.string().required().min(3).max(50),countInStock:G.a.number().required(),brand:G.a.string().required().min(3).max(50),description:G.a.string().required().min(3).max(50)},n.doSubmit=function(){var e=Object(E.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.handleSubmit(),a=new FormData(n.form.current),n.state.image.map(function(){var e=Object(E.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.set("image",t,t.name);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,f.a.post("/api/upload",a);case 7:r=e.sent,r.data,n.props.addStock(n.state.field),n.setState({display:!1});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.update=function(){var e=Object(E.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n.handleSubmit(),n.props.updateStock(n.state.field),n.setState({display:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.openForm=function(e){n.setState({field:e,display:!0})},n.closeForm=function(e){e.preventDefault(),n.setState({display:!1})},n.form=r.a.createRef(),n}return Object(S.a)(a,[{key:"componentDidUpdate",value:function(){var e=Object(E.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.stocks!==t.stocks&&((a=[Object(F.a)({},this.state.products)]).push(this.props.stocks),this.setState({products:a}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(E.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/products/getStock");case 2:t=e.sent,a=t.data,this.setState({products:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.state.products;return r.a.createElement("div",null,$()?r.a.createElement("div",null,r.a.createElement("button",{className:"button",onClick:function(){return e.openForm({})}},"Add stock")):r.a.createElement("p",null," please log in first"),this.state.display&&r.a.createElement("div",{className:"form"},r.a.createElement("h3",{className:"product-id"},this.state.field._id?"ID: ".concat(this.state.field._id):"Create new stock"),r.a.createElement("form",{onSubmit:this.doSumbit,className:"form-content",ref:this.form},this.generateForm("name","Name"),this.state.field._id?this.generateForm("image","Image"):this.generateUploadForm(),this.generateForm("brand","Brand"),this.generateForm("category","Category"),this.generateForm("description","Description"),this.generateForm("price","Price"),this.generateForm("countInStock","Number of item in stock"),r.a.createElement("br",null),this.state.field._id?this.generateButton("Update",this.update):this.generateButton("Submit",this.doSubmit),r.a.createElement("br",null),r.a.createElement("button",{className:"button",onClick:this.closeForm},"Back"))),!1)}}]),a}(V),Y=Object(m.b)((function(e){return{stocks:e.productList}}),(function(e){return{addStock:function(t){return e((a=t,function(){var e=Object(E.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"PRODUCT_LIST_REQUEST"}),e.next=4,l=a,g.post("/api/upload",l);case 4:n=e.sent,r=n.data,t({type:"UPDATE_LIST_SUCCESS",payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"PRODUCT_LIST_ERROR",payload:e.t0.message});case 12:case"end":return e.stop()}var l}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()));var a},updateStock:function(t){return e((a=t,function(){var e=Object(E.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l=a._id,c=a,g.put("/api/upload/"+l,c);case 3:n=e.sent,r=n.data,console.log(r),t({type:"UPDATE_LIST_SUCCESS",payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"PRODUCT_LIST_ERROR",payload:e.t0.message});case 12:case"end":return e.stop()}var l,c}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()));var a},loadStockList:function(t){return e(h())}}}))(W),X=function(e){return r.a.createElement("div",{className:"progress-bar"},r.a.createElement("div",{className:e.step1?"active":""},"Sign In"),r.a.createElement("div",{className:e.step2?"active":""},"Shipping"),r.a.createElement("div",{className:e.step3?"active":""},"Payment"),r.a.createElement("div",{className:e.step4?"active":""},"Place Order"))};var K=function(e){var t=Object(n.useState)({address:"",city:"",postalCode:"",country:""}),a=Object(U.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)({}),i=Object(U.a)(s,2),o=i[0],u=i[1],d=(Object(m.d)((function(e){return e.cart})).shipping,Object(m.c)()),p={address:G.a.string().required(),city:G.a.string().required().min(2).max(255),postalCode:G.a.string().required().min(4).max(8),country:G.a.string().required().min(3).max(50)},E=function(){var e=G.a.object(p).validate(l,{abortEarly:!1}).error;if(!e)return null;var t,a={},n=Object(L.a)(e.details);try{for(n.s();!(t=n.n()).done;){var r=t.value;a[r.path[0]]=r.message}}catch(c){n.e(c)}finally{n.f()}return a},v=function(e){var t=e.target,a={},n=function(e,t){var a=Object(R.a)({},e,t),n=Object(R.a)({},e,p[e]),r=G.a.object(n).validate(a).error;return r?r.details[0].message:null}(t.name,t.value);n?a[t.name]=n:delete o[t.name];var r=Object(F.a)({},l);r[t.name]=t.value,c(r),u(a)},f=function(t){t.preventDefault();var a,n=E();n&&console.log("not validated"),n||d((a=l,function(e){e({type:"CART_SAVE_SHIPPING",payload:a})})),e.history.push("/payment")};return r.a.createElement("div",null,r.a.createElement(X,{step1:!0,step2:!0}),r.a.createElement("div",{className:"form"},r.a.createElement("h3",null,"Shipping"),r.a.createElement("form",{className:"form-content",onSubmit:f},r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement("input",{type:"text",id:"address",value:l.address,name:"address",onChange:v}),o&&r.a.createElement("div",{className:"error-message"},o.address),r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("input",{type:"text",id:"city",value:l.city,name:"city",onChange:v}),o&&r.a.createElement("div",{className:"error-message"},o.city),r.a.createElement("label",{htmlFor:"postalCode"},"Postal Code"),r.a.createElement("input",{value:l.postalCode,id:"postalCode",type:"text",name:"postalCode",onChange:v}),o&&r.a.createElement("div",{className:"error-message"},o.postalCode),r.a.createElement("label",{htmlFor:"country"},"Country"),r.a.createElement("input",{value:l.country,id:"country",type:"text",name:"country",onChange:v}),o&&r.a.createElement("div",{className:"error-message"},o.country),r.a.createElement("br",null),r.a.createElement("button",{onClick:f,className:"button",disabled:E()},"Continue"))))};var Z=function(e){var t=Object(n.useState)(""),a=Object(U.a)(t,2),l=a[0],c=a[1],s=Object(m.d)((function(e){return e.cart})),i=(s.products,s.shipping,s.payment,Object(m.c)());return r.a.createElement("div",null,r.a.createElement(X,{step1:!0,step2:!0,step3:!0}),r.a.createElement("div",{className:"form"},r.a.createElement("h3",null,"Payment"),r.a.createElement("form",{className:"form-content payment-form",onSubmit:function(t){var a;t.preventDefault(),i((a=l,function(e){e({type:"CART_SAVE_PAYMENT",payload:a})})),e.history.push("/placeOrder")}},r.a.createElement("input",{type:"radio",id:"payment-method",value:"paypal",name:"paymentMethod",onChange:function(e){return c(e.target.value)}}),r.a.createElement("label",{htmlFor:"payment-method"},"Paypal"),r.a.createElement("button",{className:"button",type:"submit"},"Submit"))))};var ee=function(e){var t=Object(m.d)((function(e){return e.cart})),a=(t.products,t.shipping),n=t.payment;return a||e.history.push("/shipping"),n||e.history.push("/payment"),Object(m.c)(),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(X,{step1:!0,step2:!0,step3:!0,step4:!0})),r.a.createElement("div",{className:"placeorder"},r.a.createElement("div",{className:"placeorder-list"},r.a.createElement("div",null,r.a.createElement("h3",null,"Shipping Info"),r.a.createElement("div",null,t.shipping.address,",",t.shipping.city,",",t.shipping.postalCode,",",t.shipping.country)),r.a.createElement("div",null,r.a.createElement("h3",null,"Payment"),r.a.createElement("div",null,"Payment Method: ",t.payment.paymentMethod))),r.a.createElement("div",{className:"placeorder-header"},r.a.createElement("h3",null,"Shopping Cart"),r.a.createElement("h6",null,"Price"),0===t.cartItems.length?r.a.createElement("div",null,"Cart is empty"):t.cartItems.map((function(e){return r.a.createElement("div",{key:e._id,className:"cart-details"},r.a.createElement("div",{className:"cart-details-image"},r.a.createElement("img",{src:e.image})),r.a.createElement("div",{className:"cart-details-info"},r.a.createElement("ul",null,r.a.createElement("li",null,e.name),r.a.createElement("li",null,"Qty: item.qty"),r.a.createElement("li",null,e.price))))}))),r.a.createElement("div",{className:"placeorder-action"},r.a.createElement("h4",null,"Subtotal (",t.cartItems.reduce((function(e,t){return e+Number(t.qty)}),0)," items) :$ ",t.cartItems.reduce((function(e,t){return e+t.qty*t.price}),0)),r.a.createElement("button",{onClick:function(){e.history.push("/shipping")},className:"button"},"Check Out"))))};function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ae(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ne=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M386.689,304.403c-35.587,0-64.538,28.951-64.538,64.538s28.951,64.538,64.538,64.538 c35.593,0,64.538-28.951,64.538-64.538S422.276,304.403,386.689,304.403z M386.689,401.21c-17.796,0-32.269-14.473-32.269-32.269 c0-17.796,14.473-32.269,32.269-32.269c17.796,0,32.269,14.473,32.269,32.269C418.958,386.738,404.485,401.21,386.689,401.21z"}))),re=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M166.185,304.403c-35.587,0-64.538,28.951-64.538,64.538s28.951,64.538,64.538,64.538s64.538-28.951,64.538-64.538 S201.772,304.403,166.185,304.403z M166.185,401.21c-17.796,0-32.269-14.473-32.269-32.269c0-17.796,14.473-32.269,32.269-32.269 c17.791,0,32.269,14.473,32.269,32.269C198.454,386.738,183.981,401.21,166.185,401.21z"}))),le=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M430.15,119.675c-2.743-5.448-8.32-8.885-14.419-8.885h-84.975v32.269h75.025l43.934,87.384l28.838-14.5L430.15,119.675z"}))),ce=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("rect",{x:216.202,y:353.345,width:122.084,height:32.269}))),se=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M117.781,353.345H61.849c-8.912,0-16.134,7.223-16.134,16.134c0,8.912,7.223,16.134,16.134,16.134h55.933 c8.912,0,16.134-7.223,16.134-16.134C133.916,360.567,126.693,353.345,117.781,353.345z"}))),ie=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M508.612,254.709l-31.736-40.874c-3.049-3.937-7.755-6.239-12.741-6.239H346.891V94.655 c0-8.912-7.223-16.134-16.134-16.134H61.849c-8.912,0-16.134,7.223-16.134,16.134s7.223,16.134,16.134,16.134h252.773v112.941 c0,8.912,7.223,16.134,16.134,16.134h125.478l23.497,30.268v83.211h-44.639c-8.912,0-16.134,7.223-16.134,16.134 c0,8.912,7.223,16.134,16.134,16.134h60.773c8.912,0,16.134-7.223,16.135-16.134V264.605 C512,261.023,510.806,257.538,508.612,254.709z"}))),oe=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M116.706,271.597H42.487c-8.912,0-16.134,7.223-16.134,16.134c0,8.912,7.223,16.134,16.134,16.134h74.218 c8.912,0,16.134-7.223,16.134-16.134C132.84,278.82,125.617,271.597,116.706,271.597z"}))),ue=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M153.815,208.134H16.134C7.223,208.134,0,215.357,0,224.269s7.223,16.134,16.134,16.134h137.681 c8.912,0,16.134-7.223,16.134-16.134S162.727,208.134,153.815,208.134z"}))),me=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M180.168,144.672H42.487c-8.912,0-16.134,7.223-16.134,16.134c0,8.912,7.223,16.134,16.134,16.134h137.681 c8.912,0,16.134-7.223,16.134-16.134C196.303,151.895,189.08,144.672,180.168,144.672z"}))),de=r.a.createElement("g",null),pe=r.a.createElement("g",null),Ee=r.a.createElement("g",null),ve=r.a.createElement("g",null),fe=r.a.createElement("g",null),ge=r.a.createElement("g",null),he=r.a.createElement("g",null),be=r.a.createElement("g",null),ye=r.a.createElement("g",null),Se=r.a.createElement("g",null),Oe=r.a.createElement("g",null),Ce=r.a.createElement("g",null),_e=r.a.createElement("g",null),Ne=r.a.createElement("g",null),je=r.a.createElement("g",null),we=function(e){var t=e.svgRef,a=e.title,n=ae(e,["svgRef","title"]);return r.a.createElement("svg",te({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t},n),a?r.a.createElement("title",null,a):null,ne,re,le,ce,se,ie,oe,ue,me,de,pe,Ee,ve,fe,ge,he,be,ye,Se,Oe,Ce,_e,Ne,je)},Ie=r.a.forwardRef((function(e,t){return r.a.createElement(we,te({svgRef:t},e))})),Te=(a.p,function(e){Object(O.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).state={},n.toggleHeader=function(){var e=window.pageYOffset;n.prevPoints>e?n.ref.current.style.top="0":n.ref.current.style.top="-70px",n.prevPoints=e},n.prevPoints=window.pageYOffset,n.ref=r.a.createRef(),n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.toggleHeader)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.toggleHeader)}},{key:"render",value:function(){return r.a.createElement("header",{ref:this.ref},r.a.createElement("span",null,"Free Shipping on order over $100"),r.a.createElement(o.b,{to:"/cart"},r.a.createElement(Ie,{className:"icon"})))}}]),a}(n.Component)),ke=function(e){return r.a.createElement("button",{className:"dropdown__btn",onClick:function(){i.a.remove("userInfo"),window.location="/"}},"Logout")};a(112);var xe=function(){var e=$();return r.a.createElement(o.a,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"grid"},r.a.createElement(Te,{user:e}),r.a.createElement("nav",{className:"navigation-bar"},r.a.createElement(o.b,{to:"/"},"Qdo Logo"),r.a.createElement(o.b,{to:"/"},"Home"),r.a.createElement("div",{className:"dropdown"},e?r.a.createElement(o.b,{to:"/profile",className:"dropbtn"},"Welcome back, ",e.name," ",r.a.createElement("span",null,"\u25bc")):r.a.createElement(o.b,{to:"/signin",className:"dropbtn"},"Sign In ",r.a.createElement("span",null,"\u25bc")),r.a.createElement("div",{className:"dropdown-content"},r.a.createElement(o.b,{className:"dropdown__a",to:"/stock"},"Manage Products"),r.a.createElement(ke,{user:e})))),r.a.createElement("main",null,r.a.createElement(u.a,{path:"/placeOrder",component:ee}),r.a.createElement(u.a,{path:"/payment",component:Z}),r.a.createElement(u.a,{path:"/shipping",component:K}),r.a.createElement(u.a,{path:"/stock",component:Y}),r.a.createElement(u.a,{path:"/contactUs",component:J}),r.a.createElement(u.a,{path:"/signup",component:B}),r.a.createElement(u.a,{path:"/signin",component:H}),r.a.createElement(u.a,{path:"/product/:id",component:P}),r.a.createElement(u.a,{path:"/cart/:id?",component:A}),r.a.createElement(u.a,{path:"/",exact:!0,component:x})),r.a.createElement("footer",null,r.a.createElement("p",null,"All rights reserved.")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ue=a(23);var Pe=a(59);var De=i.a.getJSON("cartItems")||[],Ae=i.a.getJSON("userInfo")||null,Fe={cart:{cartItems:De},users:{userInfo:Ae},register:{userInfo:Ae}},Re=Object(Ue.c)({productList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_LIST_REQUEST":return{loading:!0};case"PRODUCT_LIST_SUCCESS":return{loading:!1,products:t.payload};case"PRODUCT_LIST_ERROR":return{loading:!1,error:t.payload};case"UPDATE_LIST_SUCCESS":var a=t.payload,n=e.products.find((function(e){return e._id===a._id}));return n?{loading:!1,products:e.products.map((function(e){return e._id===a._id?a:e}))}:{loading:!1,products:[].concat(Object(b.a)(e.products),[a])};case"DELETE_LIST":return{products:e.products.filter((function(e){return e._id!==t.payload}))};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_DETAILS_REQUEST":return{logging:!0,product:{id:t.payload}};case"PRODUCT_DETAILS_SUCCESS":return{logging:!1,product:t.payload};case"PRODUCT_DETAILS_FAIL":return{logging:!1,error:t.payload};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[],shipping:{},payment:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":var a=t.payload,n=e.cartItems.find((function(e){return e._id===a._id}));return n?{cartItems:e.cartItems.map((function(e){return e._id===n._id?a:e}))}:{cartItems:[].concat(Object(b.a)(e.cartItems),[a])};case"CART_REMOVE_ITEM":return{cartItems:e.cartItems.filter((function(e){return e._id!==t.payload}))};case"CART_SAVE_SHIPPING":return Object(F.a)(Object(F.a)({},e),{},{shipping:t.payload});case"CART_SAVE_PAYMENT":return Object(F.a)(Object(F.a)({},e),{},{payment:t.payload});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ATTEMPT":return{loading:!0};case"LOGIN_SUCCESS":return{loading:!1,user:t.payload};case"LOGIN_FAIL":return{loading:!1,error:t.payload};default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_UP_ATTEMPT":return{loading:!0};case"SIGN_UP_SUCCESS":return{loading:!1,user:t.payload};case"SIGN_UP_FAIL":return{loading:!1,error:t.payload};default:return e}},contactForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fields:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONTACT_US_SUBMITTED":return{loading:!0};case"CONTACT_US_SUCCESS":case"CONTACT_US_FAIL":return{loading:!1,fields:t.payload};default:return e}},shipping:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SHIPPING_ATTEMP":return{loading:!0};case"SET_SHIPPING_SUCCESS":return{loading:!1,details:t.payload};case"SET_SHIPPING_FAIL":return{loading:!1,error:t.payload};default:return e}}}),Le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ue.d,Me=Object(Ue.e)(Re,Fe,Le(Object(Ue.a)(Pe.a)));c.a.render(r.a.createElement(m.a,{store:Me},r.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,a){e.exports=a.p+"static/media/DSCF8515_edited.06715f59.jpg"},55:function(e,t,a){e.exports=a.p+"static/media/DSCF8574_edited.7d24e19b.jpg"},56:function(e,t,a){e.exports=a.p+"static/media/DSCF8602_edited.0a451853.jpg"},60:function(e,t,a){e.exports=a(113)},65:function(e,t,a){}},[[60,1,2]]]);
//# sourceMappingURL=main.e7aa0625.chunk.js.map